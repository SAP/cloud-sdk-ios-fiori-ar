<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FioriARKit  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
	<meta name="viewport" content="width=device-width, viewport-fit=cover, initial-scale=1.0" />
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="FioriARKit  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p>
          <a href="index.html">FioriARKit Docs</a>
          <span class="no-mobile"></span>
        </p>
    
    
      </div>
    </header>
    <div id="breadcrumbs-container">
      <div class="content-wrapper">
        <p id="breadcrumbs">
          <span class="no-mobile">
            <a href="index.html">FioriARKit Reference</a>
            <img id="carat" src="img/carat.png" alt=""/>
          </span>
          FioriARKit  Reference
        </p>
      </div>
    </div>
    <div class="wrapper">
      <div class="article-wrapper">
        <article class="main-content">
          <section>
            <section class="section">
              
              <p align="center">
  </br>
  <span><b>SAP Fiori for iOS ARKit</b></span>
</p>

<hr>

<div align="center">
    <a href="https://github.com/SAP/cloud-sdk-ios-fioriarkit#installation">Installation
    </a>
    |
    <a href="https://github.com/SAP/cloud-sdk-ios-fioriarkit#examples"> Examples
    </a>
    |
    <a href="https://sap.github.io/cloud-sdk-ios-fioriarkit"> API Documentation
    </a>
    |
    <a href="https://github.com/SAP/cloud-sdk-ios-fioriarkit/blob/main/CHANGELOG.md"> Changelog
    </a>
</div>

<hr>

<div align="center">
    <a href="https://github.com/SAP/cloud-sdk-ios-arkit/actions?query=workflow%3A%22CI%22">
        <img src="https://github.com/SAP/cloud-sdk-ios-fioriarkit/workflows/CI/badge.svg"
             alt="Build Status">
    </a>
    <a href="https://conventionalcommits.org">
        <img src="https://img.shields.io/badge/Conventional%20Commits-1.0.0-yellow.svg"
             alt="Conventional Commits">
    </a>
    <a href="http://commitizen.github.io/cz-cli/">
        <img src="https://img.shields.io/badge/commitizen-friendly-brightgreen.svg"
             alt="Commitizen friendly">
    </a>
    <a href="https://api.reuse.software/info/github.com/SAP/cloud-sdk-ios-fioriarkit">
        <img src="https://api.reuse.software/badge/github.com/SAP/cloud-sdk-ios-fioriarkit"
             alt="REUSE status">
    </a>
</div>

<hr>
<h1 id='summary' class='heading'>Summary</h1>

<p>This project is a SwiftUI implementation of the Augmented Reality (AR) patterns in the <a href="https://experience.sap.com/fiori-design-ios/">SAP Fiori for iOS Design Guidelines</a>.</p>

<p>Currently supported:</p>

<ul>
<li><a href="https://experience.sap.com/fiori-design-ios/article/ar-annotations/">AR Annotations</a></li>
</ul>
<h1 id='ar-annotations' class='heading'>AR Annotations</h1>

<p><a href="https://user-images.githubusercontent.com/77754056/121744202-2ea88c80-cac8-11eb-811d-9c9edb6423fa.mp4">https://user-images.githubusercontent.com/77754056/121744202-2ea88c80-cac8-11eb-811d-9c9edb6423fa.mp4</a></p>

<p>Annotations refer to <a href="https://experience.sap.com/fiori-design-ios/article/ar-cards/">Cards</a> that match with a corresponding <a href="https://experience.sap.com/fiori-design-ios/article/ar-marker/">Marker</a> located relative to an image or object in the real world. To view annotations in the world view, the user scans the image / object with the <a href="https://experience.sap.com/fiori-design-ios/article/ar-annotations/#ar-scanner">AR Scanner</a>.</p>

<p>3D modeling is not required to represent AR annotations as the respective controls (<code><a href="Structs/ARScanView.html">ARScanView</a></code>, <code><a href="Structs/MarkerView.html">MarkerView</a></code> and <code><a href="Structs/CardView.html">CardView</a></code>) are implemented with SwiftUI in this package.</p>

<p>An app developer needs to provide a scene of markers relative to an <code>Image</code> or <code>Object</code> anchor. Such scene creation is possible with Apple&rsquo;s <a href="https://developer.apple.com/augmented-reality/tools/">Reality Composer</a> tool.</p>

<p>Depending on how the scene is stored (<code>.rcproject</code>, <code>.reality</code> or <code>.usdz</code> files) the app developer has to specify an appropiate loading strategy to populate the scene and the associated card data.</p>

<p>Cards and Markers support SwiftUI <a href="https://developer.apple.com/documentation/swiftui/viewbuilder">ViewBuilder</a> to allow custom design.</p>
<h2 id='reality-composer' class='heading'>Reality Composer</h2>
<h3 id='composing-the-scene' class='heading'>Composing the scene</h3>

<ol>
<li>Open the Reality Composer app and create a scene with an image or object anchor</li>
<li>Choose an image or scan an object and give the scene a name e.g. ExampleScene</li>
<li>Place spheres in the desired positions</li>
<li>Preview in AR to fine tune</li>
<li>Name the spheres with a type that conforms to LosslessStringConvertable</li>
<li>The name of the sphere will correspond to the <code><a href="Protocols.html#/s:10FioriARKit13CardItemModelP">CardItemModel</a></code> id</li>
<li>Export the scene depending on the chosen supported loading strategy

<ul>
<li>Export the scene as <code>.usdz</code> file (Enable usdz export in preferences or iOS app settings)</li>
<li>Export the scene as a <code>.reality</code> file</li>
<li>Save the entire project as an <code>.rcproject</code> with a single scene</li>
</ul></li>
</ol>

<blockquote>
<p><strong>Notes</strong>:</p>

<ul>
<li>Reality Composer is required to scan an object when choosing an Object Anchor.</li>
<li>Scanning an object requires using an iOS device in the Reality Composer app</li>
<li>The spheres are for scene creation and will be invisible in the ARCards scene</li>
</ul>
</blockquote>

<p align="center">
<img height="400" alt="rcDemo1" src="https://user-images.githubusercontent.com/77754056/119742939-784d7200-be4e-11eb-928d-6d83b07e49ff.png">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img height="400" alt="rcDemo2" src="https://user-images.githubusercontent.com/77754056/119743047-a6cb4d00-be4e-11eb-8543-4ed018fa25f3.jpeg">
</p>
<h2 id='data-consumption' class='heading'>Data Consumption</h2>
<h3 id='carditemmodel' class='heading'>CardItemModel</h3>

<p>A loading strategy accepts an array of elements, each element conforming to the <code><a href="Protocols.html#/s:10FioriARKit13CardItemModelP">CardItemModel</a></code> protocol, to populate card-related data. The <em>id</em> property of the model has to correspond to the <em>name</em> of the Entity (sphere) from Reality Composer.</p>
<h3 id='json' class='heading'>JSON</h3>

<p>Each of the loading strategies also has an initializer to accept<code>Data</code> represented by a JSON array.</p>
<pre class="highlight swift"><code><span class="c1">// JSON key/value:</span>
<span class="s">"id"</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span>
<span class="s">"title_"</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span>
<span class="s">"descriptionText_"</span><span class="p">:</span> <span class="kt">String</span><span class="p">?,</span>
<span class="s">"detailImage_"</span><span class="p">:</span> <span class="kt">Data</span><span class="p">?,</span> <span class="c1">// base64 encoding of Image</span>
<span class="s">"actionText_"</span><span class="p">:</span> <span class="kt">String</span><span class="p">?,</span>
<span class="s">"icon_"</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="c1">// systemName of SFSymbol</span>
</code></pre>
<h3 id='loading-strategies' class='heading'>Loading Strategies</h3>

<p>The supported loading strategies (<code><a href="Structs/UsdzFileStrategy.html">UsdzFileStrategy</a></code>, <code><a href="Structs/RealityFileStrategy.html">RealityFileStrategy</a></code>, and <code><a href="Structs/RCProjectStrategy.html">RCProjectStrategy</a></code>) require, in addition to the scene and card-related data, information about the anchor used for detecting a scene. Using an <code>Image</code> anchor requires the app developer to provide anchorImage and its physicalWidth as initializer parameters. For an <code>Object</code> anchor the anchorImage and physicalWidth parameters can be nil.</p>

<p>The scene can be represented in different file types and each strategy requires different data and setup.</p>

<ul>
<li><strong>USDZ Strategy:</strong> Requires a URL path to the <code>.usdz</code> file</li>
<li><strong>Reality Strategy:</strong> Requires a URL path to the <code>.reality</code> file and the name of the scene</li>
<li><strong>RCProject Strategy:</strong> Requires the name of the <code>.rcproject</code> file and the name of the scene</li>
</ul>

<blockquote>
<p><strong>Note</strong>:</p>

<ul>
<li>The RCProject strategy requires that the <code>.rcproject</code> file is part of the application bundle so that the file is available already during build time. Drag the file into Xcode to do so.</li>
</ul>
</blockquote>
<h2 id='example-usage-creating-the-contentview-and-loading-the-data' class='heading'>Example Usage: Creating the ContentView and loading the data</h2>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">FioriARKit</span>

<span class="kd">struct</span> <span class="kt">FioriARKitCardsExample</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="kd">@StateObject</span> <span class="k">var</span> <span class="nv">arModel</span> <span class="o">=</span> <span class="kt">ARAnnotationViewModel</span><span class="o">&lt;</span><span class="kt">DecodableCardItem</span><span class="o">&gt;</span><span class="p">()</span>

    <span class="k">var</span> <span class="nv">body</span><span class="p">:</span> <span class="n">some</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="cm">/**
     Initializes an AR Experience with a Scanning View flow with Markers and Cards upon anchor discovery

     - Parameters:
        - arModel: The View Model which handles the logic for the AR Experience
        - image: The image which will be displayed in the Scanning View
        - cardAction: Card Action
    */</span>
        <span class="kt">SingleImageARCardView</span><span class="p">(</span><span class="nv">arModel</span><span class="p">:</span> <span class="n">arModel</span><span class="p">,</span> <span class="nv">image</span><span class="p">:</span> <span class="kt">Image</span><span class="p">(</span><span class="s">"qrImage"</span><span class="p">),</span> <span class="nv">cardAction</span><span class="p">:</span> <span class="p">{</span> <span class="n">id</span> <span class="k">in</span>
            <span class="c1">// action to pass to corresponding card from the CardItemModel id</span>
        <span class="p">})</span>
        <span class="o">.</span><span class="nf">onAppear</span><span class="p">(</span><span class="nv">perform</span><span class="p">:</span> <span class="n">loadInitialData</span><span class="p">)</span>
    <span class="p">}</span>
<span class="c1">// Example to use a `UsdzFileStrategy` to populate scene related information (stored in a .usdz file which could have been fetched from a remote server during runtime) as well as card-related information (stored in a .json file which could have been fetched from a remote server as well)</span>
    <span class="kd">func</span> <span class="nf">loadInitialData</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">usdzFilePath</span> <span class="o">=</span> <span class="kt">FileManager</span><span class="o">.</span><span class="k">default</span><span class="o">.</span><span class="nf">getDocumentsDirectory</span><span class="p">()</span><span class="o">.</span><span class="nf">appendingPathComponent</span><span class="p">(</span><span class="kt">FileManager</span><span class="o">.</span><span class="n">usdzFiles</span><span class="p">)</span><span class="o">.</span><span class="nf">appendingPathComponent</span><span class="p">(</span><span class="s">"ExampleRC.usdz"</span><span class="p">)</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">anchorImage</span> <span class="o">=</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"qrImage"</span><span class="p">),</span> 
              <span class="k">let</span> <span class="nv">jsonUrl</span> <span class="o">=</span> <span class="kt">Bundle</span><span class="o">.</span><span class="n">main</span><span class="o">.</span><span class="nf">url</span><span class="p">(</span><span class="nv">forResource</span><span class="p">:</span> <span class="s">"Tests"</span><span class="p">,</span> <span class="nv">withExtension</span><span class="p">:</span> <span class="s">"json"</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="p">}</span>

        <span class="k">do</span> <span class="p">{</span>
            <span class="k">let</span> <span class="nv">jsonData</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">Data</span><span class="p">(</span><span class="nv">contentsOf</span><span class="p">:</span> <span class="n">jsonUrl</span><span class="p">)</span>
            <span class="k">let</span> <span class="nv">strategy</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">UsdzFileStrategy</span><span class="p">(</span><span class="nv">jsonData</span><span class="p">:</span> <span class="n">jsonData</span><span class="p">,</span> <span class="nv">anchorImage</span><span class="p">:</span> <span class="n">anchorImage</span><span class="p">,</span> <span class="nv">physicalWidth</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span> <span class="nv">usdzFilePath</span><span class="p">:</span> <span class="n">usdzFilePath</span><span class="p">)</span>
            <span class="n">arModel</span><span class="o">.</span><span class="nf">load</span><span class="p">(</span><span class="nv">loadingStrategy</span><span class="p">:</span> <span class="n">strategy</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h2 id='requirements' class='heading'>Requirements</h2>

<ul>
<li>iOS 14 or higher</li>
<li>Xcode 12 or higher</li>
<li>Reality Composer 1.1 or higher</li>
<li>Swift Package Manager</li>
</ul>
<h2 id='installation' class='heading'>Installation</h2>

<p>The package is intended for consumption via Swift Package Manager.  </p>

<ul>
<li>To add to your application target, navigate to the <code>Project Settings &gt; Swift Packages</code> tab, then add the repository URL.</li>
<li>To add to your framework target, add the repository URL to your <strong>Package.swift</strong> manifest.</li>
</ul>

<p>In both cases, <strong>xcodebuild</strong> tooling will manage cloning and updating the repository to your app or framework project.</p>
<h2 id='configuration' class='heading'>Configuration</h2>

<p><strong>FioriARKit</strong> as umbrella product currently will contain everything the package has to offer. As the package evolves the package could be split into multiple products for different use cases.</p>
<h2 id='limitations' class='heading'>Limitations</h2>

<p>Key gaps which are present at time of open-source project launch:</p>

<ul>
<li>An authoring flow for pinning/editing an annotation in app</li>
<li>An Annotation Loading Strategy which loads an array of positions for annotations relative to the detected image/object</li>
<li>While Reality Composer is useful for scene creation, editing the scene programmatically is possible, but those changes cannot be saved to the file</li>
</ul>
<h2 id='known-issues' class='heading'>Known Issues</h2>

<p>See <strong>Limitations</strong>.</p>
<h2 id='how-to-obtain-support' class='heading'>How to obtain support</h2>

<p><a href="https://github.com/SAP/cloud-sdk-ios-fioriarkit/issues/new/choose">Create a GitHub issue</a> to create bug report, file a feature request or ask a question.</p>
<h2 id='contributing' class='heading'>Contributing</h2>

<p>If you want to contribute, please check the <a href="./CONTRIBUTING.md">Contribution Guidelines</a></p>
<h2 id='to-do-upcoming-changes' class='heading'>To-Do (upcoming changes)</h2>

<p>See <strong>Limitations</strong>.</p>
<h2 id='examples' class='heading'>Examples</h2>

<p>Functionality can be further explored with a demo app which is already part of this package (<code>Apps/Examples/Examples.xcodeproj</code>).</p>

            </section>
          </section>
        </article>
      </div>
      <div class="nav-wrapper">
        <nav class="nav-bottom">
          <ul class="nav-groups">
            <li class="nav-group-name">
              <a href="Classes.html">Classes</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="Classes/ARAnnotationViewModel.html">ARAnnotationViewModel</a>
                </li>
                <li class="nav-group-task">
                  <a href="Classes/ARManager.html">ARManager</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="Extensions.html">Extensions</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="Extensions/EnvironmentValues.html">EnvironmentValues</a>
                </li>
                <li class="nav-group-task">
                  <a href="Extensions/View.html">View</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="Protocols.html">Protocols</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="Protocols/ActionTextComponent.html">ActionTextComponent</a>
                </li>
                <li class="nav-group-task">
                  <a href="Protocols/AnnotationLoadingStrategy.html">AnnotationLoadingStrategy</a>
                </li>
                <li class="nav-group-task">
                  <a href="Protocols.html#/s:10FioriARKit13CardItemModelP">CardItemModel</a>
                </li>
                <li class="nav-group-task">
                  <a href="Protocols/DescriptionTextComponent.html">DescriptionTextComponent</a>
                </li>
                <li class="nav-group-task">
                  <a href="Protocols/DetailImageComponent.html">DetailImageComponent</a>
                </li>
                <li class="nav-group-task">
                  <a href="Protocols/IconComponent.html">IconComponent</a>
                </li>
                <li class="nav-group-task">
                  <a href="Protocols/TitleComponent.html">TitleComponent</a>
                </li>
              </ul>
            </li>
            <li class="nav-group-name">
              <a href="Structs.html">Structures</a>
              <ul class="nav-group-tasks">
                <li class="nav-group-task">
                  <a href="Structs/ARScanView.html">ARScanView</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/CardView.html">CardView</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/CarouselOptions.html">CarouselOptions</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/DecodableCardItem.html">DecodableCardItem</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/DefaultIcon.html">DefaultIcon</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/ImagePreview.html">ImagePreview</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/MarkerControl.html">MarkerControl</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/MarkerControl/State.html">– State</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/MarkerView.html">MarkerView</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/RCProjectStrategy.html">RCProjectStrategy</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/RealityFileStrategy.html">RealityFileStrategy</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/ScreenAnnotation.html">ScreenAnnotation</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/SingleImageARCardView.html">SingleImageARCardView</a>
                </li>
                <li class="nav-group-task">
                  <a href="Structs/UsdzFileStrategy.html">UsdzFileStrategy</a>
                </li>
              </ul>
            </li>
          </ul>
        </nav>
      </div>
      <div class="footer-wrapper">
        <section id="footer">
          <p>© 2020 <a class="link" href="https://github.com/SAP/cloud-sdk-ios-fioriarkit" target="_blank" rel="external noopener">https://github.com/SAP/cloud-sdk-ios-fioriarkit</a> under Apache-2.0.</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </div>
    </div>
  </body>
</html>
